<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <title>收藏</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/table.css">
    <link rel="stylesheet" href="../css/collection.css">
</head>
<body>
    <div class="page-container">
        <div table class="page-header">
            <div table="cell v-m h-c" class="header-box">
                <img class="page-logo" src="../images/logo.png" alt="logo">
            </div>
            <div table="cell v-m h-c p10" class="page-edit">
                编辑
            </div>
        </div>
        <div class="page-section page-collection">
            <ul class="page-list-box">
                <li class="list-item">
                    <a class="list-link" href="">
                        <div class="item-img">
                            <img src="../images/home-demo.png" alt="" class="main-pic">
                        </div>
                        <div class="tips-container">
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                            <div class="cancel-collection hide">
                                取消收藏
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-item">
                    <a class="list-link" href="">
                        <div class="item-img">
                            <img src="../images/home-demo.png" alt="" class="main-pic">
                        </div>
                        <div class="tips-container">
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                            <div class="cancel-collection hide">
                                取消收藏
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-item">
                    <a class="list-link" href="">
                        <div class="item-img">
                            <img src="../images/home-demo.png" alt="" class="main-pic">
                        </div>
                        <div class="tips-container">
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                            <div class="cancel-collection hide">
                                取消收藏
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-item">
                    <a class="list-link" href="">
                        <div class="item-img">
                            <img src="../images/home-demo.png" alt="" class="main-pic">
                        </div>
                        <div class="tips-container">
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                            <div class="cancel-collection hide">
                                取消收藏
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-item">
                    <a class="list-link" href="">
                        <div class="item-img">
                            <img src="../images/home-demo.png" alt="" class="main-pic">
                        </div>
                        <div class="tips-container">
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                            <div class="cancel-collection hide">
                                取消收藏
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-item">
                    <a class="list-link" href="">
                        <div class="item-img">
                            <img src="../images/home-demo.png" alt="" class="main-pic">
                        </div>
                        <div class="tips-container">
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                            <div class="cancel-collection hide">
                                取消收藏
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-item">
                    <a class="list-link" href="">
                        <div class="item-img">
                            <img src="../images/home-demo.png" alt="" class="main-pic">
                        </div>
                        <div class="tips-container">
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                            <div class="cancel-collection hide">
                                取消收藏
                            </div>
                        </div>
                    </a>
                </li>
                <li class="list-item">
                    <a class="list-link" href="">
                        <div class="item-img">
                            <img src="../images/home-demo.png" alt="" class="main-pic">
                        </div>
                        <div class="tips-container">
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                            <div class="cancel-collection hide">
                                取消收藏
                            </div>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <script>
        (function (window) {
            var pageModel = {
                domMap: {},
                setDomMap: function () {
                    this.domMap = {
                        listBox: document.querySelector('.page-list-box'),
                        editBtn: document.querySelector('.page-edit')
                    }
                },
                eventFn: function () {
                    var domMap = this.domMap,
                            self = this;

                    domMap.listBox.addEventListener('click', function (e) {
                        if(!self.checkState()) {
                            e.preventDefault();
                        }
                        var target = e.target;
                        if(target.classList.contains('cancel-collection')) {
                            console.log('well done');
                        }
                    });

                    //编辑按钮
                    domMap.editBtn.addEventListener('click', function (e) {
                        console.log(self.checkState());
                        if(self.checkState()) {
                            self.domMap.editBtn.innerHTML = '完成';
                        } else {
                            self.domMap.editBtn.innerHTML = '编辑';
                        }
                        var tipContainerArr = document.querySelectorAll('.tips-container');
                        tipContainerArr = Array.prototype.slice.call(tipContainerArr);

                        for(var i = 0; i < tipContainerArr.length; i++) {
                            var item = tipContainerArr[i],
                                saleInfo = item.querySelector('.sale-info'),
                                cancelBtn = item.querySelector('.cancel-collection');
                            saleInfo.classList.toggle('hide');
                            cancelBtn.classList.toggle('hide');
                        }
                    });
                },
                checkState: function () {
                    return this.domMap.editBtn.innerHTML.trim() === '编辑';
                },
                init: function () {
                    this.setDomMap();
                    this.eventFn();
                }
            };

            //页面初始化
            pageModel.init();
        })(window);
    </script>
</body>
</html>