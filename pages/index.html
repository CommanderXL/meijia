<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <title>NARA</title>
    <link rel="stylesheet" href="../css/reset-1.css">
    <link rel="stylesheet" href="../css/common-1.css">
    <link rel="stylesheet" href="../css/table-1.css">
    <link rel="stylesheet" href="../css/dialog-1.css">
    <link rel="stylesheet" href="../css/index-1.css">
    <link rel="stylesheet" href="../css/swiper.min.css">
    <style>
        .swiper-slide img {
            width: 320px;
        }
    </style>
</head>

<body>
    <div class="page-container">
        <div class="page-side-nav">
            <div class="user-avatar">
                <div class="avatar-box">

                </div>
                <p class="user-name">
                    用户名
                </p>
            </div>
            <ul class="side-ul">
                <li class="side-li">
                    <a table href="" class="link pending-payment">
                        <div table="cell v-m">
                            <p>
                                <span class="link-text">待付款</span>
                            </p>
                        </div>
                    </a>
                </li>
                <li class="side-li">
                    <a table href="" class="link pending-use">
                        <div table="cell v-m">
                            <p>
                                <span class="link-text">
                                待使用
                                <span class="text-tips">4</span>
                                </span>
                            </p>
                        </div>
                    </a>
                </li>
                <li class="side-li">
                    <a table href="" class="link pending-comment">
                        <div table="cell v-m">
                            <p>
                                <span class="link-text">待评价</span>
                            </p>
                        </div>
                    </a>
                </li>
                <li class="side-li">
                    <a table href="" class="link pending-refund">
                        <div table="cell v-m">
                            <p>
                                <span class="link-text">退款/售后</span>
                            </p>
                        </div>
                    </a>
                </li>
                <li class="side-li">
                    <a table href="" class="link my-collection">
                        <div table="cell v-m">
                            <p>
                                <span class="link-text">我的收藏</span>
                            </p>
                        </div>
                    </a>
                </li>
                <li class="side-li">
                    <a table href="" class="link connect-platform">
                        <div table="cell v-m">
                            <p>
                                <span class="link-text">联系平台</span>
                            </p>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
        <div table class="page-header">
            <div table="cell v-m h-c" class="header-box">
                <img class="page-logo" src="../images/logo.png" alt="logo">
                <div class="page-human">
                    <span class="text-tips">5</span>
                </div>
            </div>
        </div>
        <div class="page-section">
            <div class="page-article">
                <div class="imgs-box swiper-container">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <a href="">
                                <img src="../images/home-demo.png" alt="">
                            </a>
                        </div>
                        <div class="swiper-slide">
                            <a href="">
                                <img src="../images/home-demo.png" alt="">
                            </a>
                        </div>
                        <div class="swiper-slide">
                            <a href="">
                                <img src="../images/home-demo.png" alt="">
                            </a>
                        </div>
                        <div class="swiper-slide">
                            <a href="">
                                <img src="../images/home-demo.png" alt="">
                            </a>
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                    <div class="article-nav">
                        <span class="nav-text">
                        <a href="./article-list.html">往期文章</a>
                    </span>
                    </div>
                </div>
                <div table class="page-nav">
                    <div table="cell v-m h-c p50" class="nav-item">
                        <span class="hot-recommander active-recommander">热销推荐</span>
                    </div>
                    <div table="cell v-m h-c p50" class="nav-item">
                        <span class="all-recommander">全部美甲</span>
                    </div>
                </div>
                <ul class="page-list-box">
                    <li class="list-item">
                        <a class="list-link" href="">
                            <div class="item-img">
                                <img src="../images/home-demo.png" alt="" class="main-pic">
                                <div class="item-collect">

                                </div>
                            </div>
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                        </a>
                    </li>
                    <li class="list-item">
                        <a class="list-link" href="">
                            <div class="item-img">
                                <img src="../images/home-demo.png" alt="" class="main-pic">
                                <div class="item-collect">

                                </div>
                            </div>
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                        </a>
                    </li>
                    <li class="list-item">
                        <a class="list-link" href="">
                            <div class="item-img">
                                <img src="../images/home-demo.png" alt="" class="main-pic">
                                <div class="item-collect">

                                </div>
                            </div>
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                        </a>
                    </li>
                    <li class="list-item">
                        <a class="list-link" href="">
                            <div class="item-img">
                                <img src="../images/home-demo.png" alt="" class="main-pic">
                                <div class="item-collect">

                                </div>
                            </div>
                            <div table class="sale-info">
                                <p table="cell v-m h-c p50" class="info-name">
                                    水墨清韵1
                                </p>
                                <p table="cell v-m h-c p50" class="info-price">
                                    <span class="price-detail">¥ 120 </span>起
                                </p>
                            </div>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <script src="../js/base-1.js"></script>
        <script src="../js/swiper.min.js"></script>
        <script>
        !function (window) {
            var pageModel = {
                domMap: {},
                setDomMap: function () {
                    var container = document.querySelector('.page-container');

                    this.domMap = {
                        userNameEl: container.querySelector('.page-human'),
                        sideNavEl: container.querySelector('.page-side-nav'),
                        pageListBox: container.querySelector('.page-list-box'),
                        pageNav: container.querySelector('.page-nav'),
                        hotRecommander: container.querySelector('.hot-recommander'),
                        allRecommander: container.querySelector('.all-recommander')
                    }
                },
                eventFn: function () {
                    var self = this;
                    var doms = this.domMap;

                    //侧边栏
                    doms.userNameEl.addEventListener('click', function () {
                        doms.sideNavEl.classList.toggle('side-nav-show');
                    });


                    var startX;

                    doms.sideNavEl.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        startX = e.touches[0].pageX;
                    });

                    doms.sideNavEl.addEventListener('touchmove', function (e) {
                        e.preventDefault();
                        var touch = e.touches[0];
                        if(touch.pageX - startX > 0) {
                            doms.sideNavEl.classList.contains('side-nav-show') && doms.sideNavEl.classList.remove('side-nav-show');
                            return;
                        }
                    });
                    

                    //导航点击
                    doms.pageNav.addEventListener('click', function (e) {
                        var target = e.target;
                        if(target.classList.contains('active-recommander')) return;
                        //热门推荐
                        if(target.classList.contains('hot-recommander')) {
                            self.domMap.hotRecommander.classList.add('active-recommander');
                            self.domMap.allRecommander.classList.remove('active-recommander');
                        }
                        //全部推荐
                        else {
                            self.domMap.allRecommander.classList.add('active-recommander');
                            self.domMap.hotRecommander.classList.remove('active-recommander');
                        }
                    });

                    //商品点击
                    doms.pageListBox.addEventListener('click', function (e) {
                        var target = e.target,
                                _classList = target.classList,
                                _opt = {
                                    tips: '',
                                    state: 'success'
                                };

                        if(_classList.contains('item-collect')) {
                            e.preventDefault();

                            if(_classList.contains('collect-success')) {
                                _opt.tips = '取消收藏';
                                _classList.remove('collect-success');
                            } else {
                                _opt.tips = '收藏成功';
                                _classList.add('collect-success');
                            }

                            //TODO  带上ajax请求

                            //dialog弹窗
                            dialog.tips(_opt);
                        }
                    });
                },
                init: function () {
                    this.setDomMap();

                    this.eventFn();
                }
            };

            pageModel.init();
            var swiper = new Swiper('.swiper-container', {
                pagination: '.swiper-pagination',
                paginationClickable: true
            })
        }(window);
    </script>
</body>

</html>